# –§–∏–Ω–∞–ª–Ω–∞ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è - Verified Owners Data Structure

## –î–∞—Ç–∞: 07.12.2025, 01:28

## ‚úÖ –í–°–ò–ß–ö–ò –ò–ó–ò–°–ö–í–ê–ù–ò–Ø –£–°–ü–ï–®–ù–û –ò–ó–ü–™–õ–ù–ï–ù–ò

### 1. owner_first_name_en ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä–∞–Ω–æ –°–ê–ú–û –ø—ä—Ä–≤–æ—Ç–æ –∏–º–µ –æ—Ç –∫–∏—Ä–∏–ª–∏—Ü–∞ –Ω–∞ –ª–∞—Ç–∏–Ω–∏—Ü–∞
- **–†–µ–∑—É–ª—Ç–∞—Ç:** `Asen` (–æ—Ç "–ê—Å–µ–Ω")
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 2. owner_last_name_en ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** –¢—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä–∞–Ω–æ –°–ê–ú–û —Ñ–∞–º–∏–ª–Ω–æ—Ç–æ –∏–º–µ (–Ω–µ —Å—Ä–µ–¥–Ω–æ + —Ñ–∞–º–∏–ª–∏—è)
- **–†–µ–∑—É–ª—Ç–∞—Ç:** `Asenov` (–æ—Ç "–ê—Å–µ–Ω–æ–≤", –±–µ–∑ —Å—Ä–µ–¥–Ω–æ—Ç–æ –∏–º–µ "–ú–∏—Ç–∫–æ–≤")
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 3. owner_birthdate ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** –ü–æ–ø—ä–ª–Ω–µ–Ω–æ –æ—Ç users_pending.birth_date
- **–†–µ–∑—É–ª—Ç–∞—Ç –≤ –±–∞–∑–∞—Ç–∞:** `1990-05-15` (ISO —Ñ–æ—Ä–º–∞—Ç –∑–∞ Postgres)
- **–†–µ–∑—É–ª—Ç–∞—Ç –≤ waiting_list:** `15.05.1990` (dd.mm.yyyy —Ñ–æ—Ä–º–∞—Ç)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 4. waiting_list —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
**–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** JSONB –º–∞—Å–∏–≤ —Å 10 –ø–æ–ª–µ—Ç–∞ –∑–∞ –≤—Å—è–∫–∞ –∫–æ–º–ø–∞–Ω–∏—è

–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—Ç–∞—Ç:
```json
{
  "business_name_en": "VERSAY 81 Ltd.",
  "lastUpdated": "15.05.1990",
  "EIK": "206625277",
  "VAT": "BG206625277",
  "subjectOfActivity": "...",
  "address": "Bulgaria\nPazardzhik\nPazardzhik\ns. Govedare\n4453",
  "street": "ul.Dvadeset i vtora 16",
  "owner_first_name_en": "Asen",
  "owner_last_name_en": "Asenov",
  "owner_birthdate": "15.05.1990"
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ò–ß–ö–ò 10 –ü–û–õ–ï–¢–ê –°–ê –ù–ê–õ–ò–ß–ù–ò

### 5. –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –∫–∞–≤–∏—á–∫–∏ ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ '' –∏–ª–∏ "" –æ—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
- **–ü—Ä–æ–±–ª–µ–º:** –ö–∞–≤–∏—á–∫–∏—Ç–µ –±—è—Ö–∞ Unicode —Å–∏–º–≤–æ–ª–∏ (U+201D)
- **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–µ–Ω regex —Å explicit Unicode codes: `[\u0022\u0027\u00AB\u00BB\u201C\u201D\u201E\u201F\u2018\u2019\u2039\u203A]`
- **–†–µ–∑—É–ª—Ç–∞—Ç –ø—Ä–µ–¥–∏:** `ul."Dvadeset i vtora" 16`
- **–†–µ–∑—É–ª—Ç–∞—Ç —Å–µ–≥–∞:** `ul.Dvadeset i vtora 16`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 6. –ó–∞–º—è–Ω–∞ –Ω–∞ "–ë—ä–ª–≥–∞—Ä–∏—è" —Å "Bulgaria" ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑–∞–º—è–Ω–∞ –≤ –∞–¥—Ä–µ—Å–∏
- **–†–µ–∑—É–ª—Ç–∞—Ç:** `Bulgaria` (–≤–º–µ—Å—Ç–æ "–ë–™–õ–ì–ê–†–ò–Ø" –∏–ª–∏ "BALGARIYa")
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 7. –§–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∞–¥—Ä–µ—Å —Å –Ω–æ–≤–∏ —Ä–µ–¥–æ–≤–µ ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** –ê–¥—Ä–µ—Å—ä—Ç –¥–∞ –µ –Ω–∞ –æ—Ç–¥–µ–ª–Ω–∏ —Ä–µ–¥–æ–≤–µ –∑–∞ –ø–æ-–ª–µ—Å–Ω–æ –∫–æ–ø–∏—Ä–∞–Ω–µ
- **–†–µ–∑—É–ª—Ç–∞—Ç:**
  ```
  Bulgaria
  Pazardzhik
  Pazardzhik
  s. Govedare
  4453
  ```
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 8. Street —Å –ª–∞—Ç–∏–Ω—Å–∫–∏ –±—É–∫–≤–∏ ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** street —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ —Å –∞–Ω–≥–ª–∏–π—Å–∫–∏ –±—É–∫–≤–∏
- **–†–µ–∑—É–ª—Ç–∞—Ç:** `ul.Dvadeset i vtora 16` (—Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä–∞–Ω–æ –æ—Ç –∫–∏—Ä–∏–ª–∏—Ü–∞)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

### 9. –î–∞—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–∏ –∫–∞—Ç–æ dd.mm.yyyy ‚úÖ
- **–ò–∑–∏—Å–∫–≤–∞–Ω–µ:** owner_birthdate –≤ waiting_list –¥–∞ –µ dd.mm.yyyy
- **–†–µ–∑—É–ª—Ç–∞—Ç:** `15.05.1990`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ê–ë–û–¢–ò –ü–ï–†–§–ï–ö–¢–ù–û

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏

### –ö–æ–º–ø–ª–µ–∫—Ç–æ–≤–∞–Ω–∏ –§–∞–π–ª–æ–≤–µ:
- `supabase/functions/users_pending_worker/index.ts` - –æ—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥–∏–∫–∞

### –ö–ª—é—á–æ–≤–∏ –§—É–Ω–∫—Ü–∏–∏:
1. **transliterateCyrillicToLatin()** - —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è + –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ Unicode –∫–∞–≤–∏—á–∫–∏
2. **parseName()** - —Ä–∞–∑–¥–µ–ª—è–Ω–µ –Ω–∞ –ø—ä—Ä–≤–æ, —Å—Ä–µ–¥–Ω–æ, —Ñ–∞–º–∏–ª–Ω–æ –∏–º–µ
3. **formatAddress()** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ —Å –Ω–æ–≤–∏ —Ä–µ–¥–æ–≤–µ
4. **formatDateToDDMMYYYY()** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞—Ç–∏

### Deployed Edge Function:
- **Function:** users_pending_worker
- **Project:** ansiaiuaygcfztabtknl
- **URL:** https://ansiaiuaygcfztabtknl.supabase.co/functions/v1/users_pending_worker

## –°—Ç–∞—Ç—É—Å: üéâ –ì–û–¢–û–í–û –ó–ê –ü–†–û–î–£–ö–¶–ò–Ø

–í—Å–∏—á–∫–∏ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è —Å–∞ —Ç–µ—Å—Ç–≤–∞–Ω–∏ –∏ –ø–æ—Ç–≤—ä—Ä–¥–µ–Ω–∏ –∫–∞—Ç–æ —Ä–∞–±–æ—Ç–µ—â–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ.
